<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>SpeedyDelivery</title>
<style>
  body { margin: 0; font-family: Arial, sans-serif; background: #f5f5f5; }
  header { background-color: #ff6600; padding: 20px; color: white; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 100; }
  nav a { color: white; margin-left: 20px; text-decoration: none; font-weight: bold; cursor: pointer; }
  .hero { background-image: url('https://images.unsplash.com/photo-1604145559207-5c8e3f0b0dfb?auto=format&fit=crop&w=1500&q=80'); background-size: cover; background-position: center; height: 400px; display: flex; justify-content: center; align-items: center; color: white; text-shadow: 2px 2px 5px #000; }
  .hero h1 { font-size: 48px; }
  .section { padding: 40px 20px; text-align: center; }
  .cards { display: flex; justify-content: center; gap: 30px; flex-wrap: wrap; }
  .card { border: 1px solid #ccc; border-radius: 10px; padding: 20px; width: 250px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
  footer { background-color: #222; color: #aaa; text-align: center; padding: 20px; }
  #tracking-section { background-color: #f9f9f9; padding: 40px 20px; }
  form { margin-top: 20px; }
  input[type="text"] { padding: 10px; width: 250px; border: 1px solid #ccc; border-radius: 5px; }
  button { padding: 10px 20px; background-color: #ff6600; color: white; border: none; border-radius: 5px; margin-left: 10px; cursor: pointer; }
  #tracking-result { margin-top: 20px; font-weight: bold; }
  /* Timeline */
  .timeline { position: relative; max-width: 500px; margin: 30px auto; }
  .timeline::before { content: ''; position: absolute; left: 20px; top: 0; bottom: 0; width: 4px; background: #ccc; }
  .timeline-item { position: relative; padding-left: 50px; margin-bottom: 20px; }
  .dot { position: absolute; left: 12px; width: 16px; height: 16px; border-radius: 50%; background: #ff9900; top: 0; }
  .dot.latest { background: green; }
  .pulse { position: absolute; left: 4px; top: -4px; width: 24px; height: 24px; border-radius: 50%; background: rgba(0,128,0,0.3); animation: pulse 1.5s infinite; }
  @keyframes pulse { 0% { transform: scale(0.7); opacity: 0.7; } 50% { transform: scale(1.4); opacity: 0; } 100% { transform: scale(0.7); opacity: 0.7; } }
  .status-text { display: inline-block; }
  .status-text.latest { font-weight: bold; background-color: #fff4e0; padding: 3px 6px; border-radius: 3px; }
  .status-text.faded { color: #aaa; }
  .time { font-size: 0.9em; color: gray; display:block; }
  .location { font-size: 0.9em; color: #0077cc; display:block; }
  .fold-btn { cursor:pointer; color:#0077cc; font-size:0.9em; margin-top:5px; display:block; }
  .hidden { display:none; }
</style>
</head>
<body>

<header>
  <h2>SpeedyDelivery</h2>
  <nav>
    <a href="#">Home</a>
    <a href="#">Services</a>
    <a href="#tracking-section">Track</a>
    <a href="#">Contact</a>
  </nav>
</header>

<section class="hero">
  <h1>Fast, Reliable & On-Time Delivery</h1>
</section>

<section class="section">
  <h2>Why Choose Us?</h2>
  <div class="cards">
    <div class="card">
      <h3>Fast Delivery</h3>
      <p>We deliver within hours, not days.</p>
    </div>
    <div class="card">
      <h3>Real-time Tracking</h3>
      <p>Track your package live with our mobile app.</p>
    </div>
    <div class="card">
      <h3>24/7 Support</h3>
      <p>We're here for you anytime, anywhere.</p>
    </div>
  </div>
</section>

<section class="section">
  <h2>Popular Packages</h2>
  <div class="cards">
    <div class="card">
      <h3>Express Delivery</h3>
      <p>Within 2 hours across the city.</p>
    </div>
    <div class="card">
      <h3>Same-Day Delivery</h3>
      <p>Perfect for e-commerce and urgent needs.</p>
    </div>
    <div class="card">
      <h3>Nationwide</h3>
      <p>Fast shipping to every corner of the country.</p>
    </div>
  </div>
</section>

<section id="tracking-section">
  <h2>Track Your Delivery</h2>
  <form onsubmit="trackDelivery(event)">
    <input type="text" id="tracking-id" placeholder="Enter tracking number..." required />
    <button type="submit">Track</button>
  </form>
  <div id="tracking-result"></div>
</section>

<footer>
  &copy; 2025 SpeedyDelivery. All rights reserved.
</footer>

<script>
function trackDelivery(e){
  e.preventDefault();
  const trackingId = document.getElementById("tracking-id").value.trim();
  const resultDiv = document.getElementById("tracking-result");
  const data = JSON.parse(localStorage.getItem("trackingData")) || {};

  resultDiv.innerHTML = "";

  if(!(trackingId in data)){
    resultDiv.textContent = "‚ùå Tracking ID not found. Please check and try again.";
    resultDiv.style.color = "red";
    return;
  }

  const history = data[trackingId];
  const timeline = document.createElement("div");
  timeline.className = "timeline";

  const foldThreshold = 4;
  const totalItems = history.length;

  for(let i=0;i<totalItems;i++){
    const update = history[i];
    const item = document.createElement("div");
    item.className = "timeline-item";
    const dot = document.createElement("div");
    dot.className = "dot";
    const text = document.createElement("div");
    text.className = "status-text";
    text.textContent = update.status;

    if(i===totalItems-1){ // latest
      dot.classList.add("latest");
      const pulse = document.createElement("div");
      pulse.className="pulse";
      item.appendChild(pulse);
      text.classList.add("latest");
    } else if(update.status==="Label Created, not yet in system" && totalItems===1){
      dot.classList.add("latest");
      text.classList.add("latest");
    } else if(i<totalItems-1-foldThreshold){
      item.classList.add("hidden");
      text.classList.add("faded");
      dot.style.background="#eee";
    }

    if(update.time) {
      const t = document.createElement("span");
      t.className="time";
      t.textContent = new Date(update.time).toLocaleString();
      text.appendChild(t);
    }
    if(update.location) {
      const loc = document.createElement("span");
      loc.className="location";
      loc.textContent=update.location;
      text.appendChild(loc);
    }

    item.appendChild(dot);
    item.appendChild(text);
    timeline.appendChild(item);
  }

  // Add fold/unfold button if more than foldThreshold
  if(totalItems>foldThreshold){
    const btn = document.createElement("span");
    btn.className="fold-btn";
    btn.textContent="Show More";
    btn.onclick = function(){
      const hiddenItems = timeline.querySelectorAll(".hidden");
      hiddenItems.forEach(el=>el.classList.toggle("hidden"));
      btn.textContent = btn.textContent==="Show More" ? "Show Less" : "Show More";
    }
    timeline.appendChild(btn);
  }

  resultDiv.appendChild(timeline);
}
</script>

</body>
</html>